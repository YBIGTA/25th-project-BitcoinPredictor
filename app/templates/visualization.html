<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candlestick Chart</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1, h2 {
            color: #333;
        }
        /* ì œëª©ê³¼ ì´ë¯¸ì§€ë¥¼ í¬í•¨í•˜ëŠ” ì»¨í…Œì´ë„ˆ */
        #header-container {
            display: flex;
            align-items: center;
            justify-content: space-between; /* ì¢Œìš°ë¡œ ì´ë¯¸ì§€ ì •ë ¬ */
            width: 100%;
            max-width: 1200px;
            margin-bottom: 20px;
            position: relative;
        }

        #header-container h1 {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            margin: 0;
        }

        #header-container h2 {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            margin: 0;
            top: 150px; 
        }

        #header-container img {
            max-height: 250px;
            width: auto;
        }

        #controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        input[type="date"] {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }

        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        #candlestick-chart {
            width: 100%;
            max-width: 1200px;
            height: 80vh; /* í™”ë©´ í¬ê¸°ì— ë”°ë¼ ë°˜ì‘í˜• í¬ê¸° */
        }

        #timeframe-controls {
            margin-bottom: 20px;
        }

        #legend {
            margin-top: 20px;
            display: flex;
            flex-direction: row;
            gap: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color-box {
            width: 20px;
            height: 20px;
        }

        #chart-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            height: 80vh;
            margin: 0 auto;
        }

        /* ë‹ë³´ê¸° ë° ì¶•ì†Œ ë²„íŠ¼ì„ ì°¨íŠ¸ì˜ ì˜¤ë¥¸ìª½ ìœ„ë¡œ ë°°ì¹˜ */
        #zoom-button, #reset-button {
            position: absolute;
            top: 10px;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            z-index: 10; /* ë²„íŠ¼ì´ ì°¨íŠ¸ ìœ„ì— ë‚˜íƒ€ë‚˜ë„ë¡ ì„¤ì • */
        }

        #zoom-button {
            right: 70px; /* ì˜¤ë¥¸ìª½ì—ì„œ ì•½ê°„ ì™¼ìª½ìœ¼ë¡œ */
        }

        #reset-button {
            right: 10px; /* ì˜¤ë¥¸ìª½ ëì— ìœ„ì¹˜ */
        }

        #controls {
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap; /* ë²„íŠ¼ê³¼ ì…ë ¥ í•„ë“œê°€ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ìˆ˜ì • */
        }

        #candlestick-chart {
            width: 100%;
            max-width: 1200px;
            height: 60vh; /* ì°¨íŠ¸ í¬ê¸° ì¡°ì • */
        }

        #rsi-chart {
            width: 100%;
            max-width: 1200px;
            height: 30vh; /* RSI ì°¨íŠ¸ í¬ê¸° ì¡°ì • */
            margin-top: 30px; /* ì°¨íŠ¸ ê°„ê²© ì¶”ê°€ */
        }

        #chart-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }

        details {
            margin-top: 20px;
            width: 100%;
        }

        summary {
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        p {
            margin-left: 20px;
            line-height: 1.6;
        }

        #economic-indicators {
            margin-top: 80px; /* ê°„ê²© ì¡°ì • */
            width: 100%;
        }

        details {
            margin-top: 20px;
            width: 100%;
        }

        summary {
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        p {
            margin-left: 20px;
            line-height: 1.6;
        }
        .styled-table {
        border-collapse: collapse;
        margin: 25px 0;
        font-size: 1.0em;
        font-family: Arial, sans-serif;
        width: 100%;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
    }

    .styled-table th, .styled-table td {
        padding: 12px 15px;
        text-align: left;
    }

    .styled-table th {
        background-color: #007BFF;  /* í—¤ë” ë°°ê²½ìƒ‰ì„ í‘¸ë¥¸ìƒ‰ìœ¼ë¡œ ì„¤ì • */
        color: #ffffff;
        font-weight: bold;
    }

    .styled-table tr {
        border-bottom: 1px solid #dddddd;
    }

    .styled-table tr:nth-of-type(even) {
        background-color: #f3f3f3;
    }

    .styled-table tr:last-of-type {
        border-bottom: 2px solid #007BFF;  /* í•˜ë‹¨ í…Œë‘ë¦¬ ìƒ‰ìƒì„ í‘¸ë¥¸ìƒ‰ìœ¼ë¡œ ì„¤ì • */
    }

    .styled-table tr:hover {
        background-color: #e0f0ff;  /* í–‰ì„ ë§ˆìš°ìŠ¤ë¡œ ì˜¤ë²„í•  ë•Œ í‘¸ë¥¸ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
    }
    </style>
</head>
<body>    
    <!-- ì œëª©ê³¼ ì´ë¯¸ì§€ë¥¼ í¬í•¨í•˜ëŠ” í—¤ë” ì»¨í…Œì´ë„ˆ -->
    <div id="header-container">
        <img src="https://alternative.me/crypto/fear-and-greed-index.png" alt="Latest Crypto Fear & Greed Index">
        <h1>Bitcoin Price Chart</h1>
        <h2>(a.k.a Ki-Young-yi)</h2>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRBK7jXDEDhuRqWVx8oT6UJIOx-DswE6B7KBg&s" alt="Image 2"/> 
    </div>

    <!-- ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
    <div id="controls">
        <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
            <div style="display: flex; flex-direction: column; align-items: center;">
                <label for="start-date">Start Date:</label>
                <input type="date" id="start-date">
            </div>
            
            <div style="display: flex; flex-direction: column; align-items: center;">
                <label for="end-date">End Date:</label>
                <input type="date" id="end-date">
            </div>
            
            <button onclick="updateChart()">Update Chart</button>
        </div>
    </div>

    <!-- íƒ€ì„í”„ë ˆì„ ì»¨íŠ¸ë¡¤ -->
    <div id="timeframe-controls" style="text-align: center; margin-top: 20px;">
        <button onclick="setTimeframe('minute')">ë¶„ë´‰</button>
        <button onclick="setTimeframe('day')">ì¼ë´‰</button>
        <button onclick="setTimeframe('week')">ì£¼ë´‰</button>
    </div>

    <!-- ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ -->
    <div id="chart-container">
        <button id="zoom-button" onclick="zoomToThreeMonths()">ğŸ”</button>
        <button id="reset-button" onclick="resetChart()">ğŸ”„</button>
        <div id="candlestick-chart"></div>
        <div id="rsi-chart"></div> <!-- RSI ì°¨íŠ¸ë¥¼ ìœ„í•œ div -->
    </div>

    <!-- ê²½ì œ ì§€í‘œ ì„¹ì…˜ -->
    <div id="economic-indicators">
        <h2>Economic Indicators</h2>
        <div id="indicators-table"></div>
        
        <!-- ê²½ì œ ì§€í‘œ ì„¤ëª… ì„¹ì…˜ -->
        <details>
            <summary>Economic Indicators Description</summary>
            <p><strong>Yahoo Indicators (ì•¼í›„ ê²½ì œì§€í‘œ)</strong></p>
            <p>S&P 500 Index (^GSPC): ë¯¸êµ­ ì£¼ì‹ ì‹œì¥ì˜ ëŒ€í‘œì ì¸ ì§€ìˆ˜ë¡œ, S&P 500 ì§€ìˆ˜ëŠ” ë¯¸êµ­ ëŒ€í˜• ìƒì¥ ê¸°ì—… 500ê°œì˜ ì£¼ê°€ë¥¼ ì¢…í•©í•´ ì‚°ì¶œë©ë‹ˆë‹¤.</p>
            <p>NASDAQ Composite (^IXIC): ë‚˜ìŠ¤ë‹¥ ì‹œì¥ì— ìƒì¥ëœ ëª¨ë“  ì£¼ì‹ì„ í¬í•¨í•˜ëŠ” ì§€ìˆ˜ë¡œ, ê¸°ìˆ ì£¼ ì¤‘ì‹¬ì˜ ì§€ìˆ˜ì…ë‹ˆë‹¤.</p>
            <p>Gold Futures (GC=F): ê¸ˆ ì„ ë¬¼ì˜ ê°€ê²©ìœ¼ë¡œ, ê¸ˆì˜ ë¯¸ë˜ ê°€ê²©ì— ëŒ€í•œ ê³„ì•½ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>CBOE Volatility Index (^VIX): ì£¼ì‹ ì‹œì¥ì˜ ë³€ë™ì„±ì„ ë‚˜íƒ€ë‚´ëŠ” ì§€ìˆ˜ë¡œ, "ê³µí¬ ì§€ìˆ˜"ë¼ê³ ë„ ë¶ˆë¦¬ë©° ì‹œì¥ì˜ ë¶ˆì•ˆê°ì„ ì¸¡ì •í•©ë‹ˆë‹¤.</p>
            <p>10-Year Treasury Yield (^TNX): ë¯¸êµ­ 10ë…„ ë§Œê¸° êµ­ì±„ì˜ ìˆ˜ìµë¥ ë¡œ, ì¥ê¸° ê¸ˆë¦¬ì˜ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤.</p>
            <p>Crude Oil Prices (CL=F): ì›ìœ  ì„ ë¬¼ ê°€ê²©ìœ¼ë¡œ, ì›ìœ ì˜ ë¯¸ë˜ ê°€ê²©ì— ëŒ€í•œ ê³„ì•½ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>EUR/USD Exchange Rate (EURUSD=X): ìœ ë¡œì™€ ë¯¸êµ­ ë‹¬ëŸ¬ ê°„ì˜ í™˜ìœ¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>Brent Crude Oil Prices (BZ=F): ë¸Œë ŒíŠ¸ìœ  ì„ ë¬¼ ê°€ê²©ìœ¼ë¡œ, ë¶í•´ì—ì„œ ìƒì‚°ëœ ì›ìœ ì˜ ë¯¸ë˜ ê°€ê²©ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>Shanghai Composite Index (000001.SS): ì¤‘êµ­ ìƒí•˜ì´ ì¦ê¶Œê±°ë˜ì†Œì— ìƒì¥ëœ ëª¨ë“  ì£¼ì‹ì„ í¬í•¨í•˜ëŠ” ì§€ìˆ˜ì…ë‹ˆë‹¤.</p>
            <p>Nikkei 225 (^N225): ì¼ë³¸ ë„ì¿„ ì¦ê¶Œê±°ë˜ì†Œì— ìƒì¥ëœ 225ê°œì˜ ì£¼ìš” ê¸°ì—… ì£¼ì‹ì„ í¬í•¨í•˜ëŠ” ì§€ìˆ˜ì…ë‹ˆë‹¤.</p>
            <p>FTSE 100 Index (^FTSE): ì˜êµ­ ëŸ°ë˜ ì¦ê¶Œê±°ë˜ì†Œì— ìƒì¥ëœ 100ëŒ€ ëŒ€ê¸°ì—…ì˜ ì£¼ì‹ì„ í¬í•¨í•˜ëŠ” ì§€ìˆ˜ì…ë‹ˆë‹¤.</p>
            <p>Euro Stoxx 50 Index (^STOXX50E): ìœ ë¡œì¡´ ë‚´ 50ê°œì˜ ì£¼ìš” ìƒì¥ ê¸°ì—…ì˜ ì£¼ê°€ë¥¼ í¬í•¨í•˜ëŠ” ìœ ëŸ½ ì§€ìˆ˜ì…ë‹ˆë‹¤.</p>
            <p>Copper Futures (HG=F): êµ¬ë¦¬ ì„ ë¬¼ ê°€ê²©ìœ¼ë¡œ, êµ¬ë¦¬ì˜ ë¯¸ë˜ ê°€ê²©ì— ëŒ€í•œ ê³„ì•½ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>USD/JPY Exchange Rate (JPY=X): ë¯¸êµ­ ë‹¬ëŸ¬ì™€ ì¼ë³¸ ì—” ê°„ì˜ í™˜ìœ¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p><strong>FRED Indicators (FRED ê²½ì œì§€í‘œ)</strong></p>
            <p>M1 Money Stock (M1SL): í†µí™” ê³µê¸‰ëŸ‰ ì§€í‘œë¡œ, í˜„ê¸ˆê³¼ ìš”êµ¬ë¶ˆì˜ˆê¸ˆì„ í¬í•¨í•œ ëˆì˜ ì´ëŸ‰ì…ë‹ˆë‹¤.</p>
            <p>Consumer Price Index (CPILFESL): ì†Œë¹„ìë¬¼ê°€ì§€ìˆ˜ë¡œ, ì†Œë¹„ìë“¤ì´ êµ¬ë§¤í•˜ëŠ” ìƒí’ˆê³¼ ì„œë¹„ìŠ¤ì˜ í‰ê·  ê°€ê²© ë³€ë™ì„ ì¸¡ì •í•©ë‹ˆë‹¤.</p>
            <p>Total Nonfarm Payroll (PAYEMS): ë¯¸êµ­ì˜ ë¹„ë†ì—… ë¶€ë¬¸ ì¼ìë¦¬ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, ê³ ìš© ì‹œì¥ì˜ ìƒíƒœë¥¼ í‰ê°€í•˜ëŠ” ì£¼ìš” ì§€í‘œì…ë‹ˆë‹¤.</p>
            <p>Industrial Production Index (INDPRO): ì‚°ì—… ìƒì‚° ì§€ìˆ˜ë¡œ, ì œì¡°ì—…, ê´‘ì—…, ì „ë ¥ ë° ê°€ìŠ¤ ë“±ì˜ ì‚°ì—…ì—ì„œ ìƒì‚°ëœ ì´ ìƒì‚°ëŸ‰ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>Unemployment Rate (UNRATE): ì‹¤ì—…ë¥ ë¡œ, ê²½ì œ í™œë™ì— ì°¸ê°€í•˜ëŠ” ì‚¬ëŒë“¤ ì¤‘ ì‹¤ì—… ìƒíƒœì— ìˆëŠ” ë¹„ìœ¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>Commercial and Industrial Loans (BUSLOANS): ê¸°ì—…ê³¼ ì‚°ì—… ë¶€ë¬¸ì— ëŒ€í•œ ëŒ€ì¶œ ì´ì•¡ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>M2 Money Stock (M2SL): M1ì— ì €ì¶•ì„± ì˜ˆê¸ˆ, ì†Œì•¡ ì •ê¸° ì˜ˆê¸ˆ ë“±ì„ ë”í•œ í†µí™” ê³µê¸‰ëŸ‰ ì§€í‘œì…ë‹ˆë‹¤.</p>
            <p>US Dollar to Japanese Yen Exchange Rate (DEXJPUS): ë¯¸êµ­ ë‹¬ëŸ¬ì™€ ì¼ë³¸ ì—” ê°„ì˜ í™˜ìœ¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>Dow Jones Industrial Average (DJIA): ë‹¤ìš°ì¡´ìŠ¤ ì‚°ì—…í‰ê· ì§€ìˆ˜ë¡œ, ë¯¸êµ­ì˜ 30ëŒ€ ëŒ€ê¸°ì—…ì˜ ì£¼ê°€ë¥¼ í¬í•¨í•œ ëŒ€í‘œì ì¸ ì£¼ê°€ ì§€ìˆ˜ì…ë‹ˆë‹¤.</p>
            <p>Federal Funds Rate (FEDFUNDS): ì—°ë°©ê¸°ê¸ˆ ê¸ˆë¦¬ë¡œ, ë¯¸êµ­ ì—°ë°©ì¤€ë¹„ì œë„ê°€ ì •í•˜ëŠ” ë‹¨ê¸° ì´ììœ¨ì…ë‹ˆë‹¤.</p>
            <p>CBOE Volatility Index (VIXCLS): CBOE ë³€ë™ì„± ì§€ìˆ˜ë¡œ, ì£¼ì‹ ì‹œì¥ì˜ ë³€ë™ì„±ì„ ì¸¡ì •í•©ë‹ˆë‹¤.</p>
            <p>10-Year Treasury Constant Maturity Rate (GS10): ë¯¸êµ­ 10ë…„ ë§Œê¸° êµ­ì±„ì˜ ìƒí™˜ ê¸°ê°„ë³„ ìˆ˜ìµë¥ ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p>Crude Oil Prices: West Texas Intermediate (WTI) (DCOILWTICO): ì„œë¶€ í…ì‚¬ìŠ¤ì‚° ì›ìœ ì˜ ê°€ê²©ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
            <p><strong>value:</strong> ê³µí¬ì§€ìˆ˜</p>
            <p><strong>value_calssification(1~5):</strong> 5ì¼ìˆ˜ë¡ íƒìš•, 1ì¼ìˆ˜ë¡ ê³µí¬</p>
        </details>
    </div>
    
    <!-- JavaScript -->
    <script>
        let selectedTimeframe = 'week';
        let zoomedStartDate = null;
        let zoomedEndDate = null;

        function setTimeframe(timeframe) {
            selectedTimeframe = timeframe;
            if (zoomedStartDate && zoomedEndDate) {
                updateChart(zoomedStartDate, zoomedEndDate);
            } else {
                updateChart();
            }
        }

        async function fetchEconomicIndicators() {
    try {
        const response = await fetch('/data');  // FastAPIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—”ë“œí¬ì¸íŠ¸
        const jsonResponse = await response.json();
        const data = jsonResponse;  // jsonResponse.data ëŒ€ì‹  jsonResponseë¥¼ ì‚¬ìš©

        if (!data || Object.keys(data).length === 0) {
            document.getElementById('indicators-table').innerHTML = "<p>No data available.</p>";
            return;
        }

        let table = "<table class='styled-table'>";
        const headers = Object.keys(data);

        // ê° í–‰ì— 5ê°œì˜ í•­ëª©ì„ í¬í•¨í•˜ëŠ” êµ¬ì¡°ë¡œ ë§Œë“¤ê¸°
        for (let i = 0; i < headers.length; i += 5) {
            table += "<tr>";
            // í—¤ë” í–‰ ìƒì„±
            for (let j = i; j < i + 5 && j < headers.length; j++) {
                table += `<th>${headers[j]}</th>`;
            }
            table += "</tr><tr>";
            // ë°ì´í„° í–‰ ìƒì„±
            for (let j = i; j < i + 5 && j < headers.length; j++) {
                table += `<td>${data[headers[j]]}</td>`;
            }
            table += "</tr>";
        }

        table += "</table>";
        document.getElementById('indicators-table').innerHTML = table;

    } catch (error) {
        console.error("Error fetching economic indicators:", error);
        document.getElementById('indicators-table').innerHTML = "<p>Error loading data.</p>";
    }
}

async function updateChart(startDate = '2023-07-31', endDate = '2024-7-31') {
    const selectedStartDate = document.getElementById('start-date').value || startDate;
    const selectedEndDate = document.getElementById('end-date').value || endDate;

    const response = await fetch(`/predict?timeframe=${selectedTimeframe}&start_date=${selectedStartDate}&end_date=${selectedEndDate}`);
    const json = await response.json();

    const trueValueData = json.true_value;
    const predictData = json.predict;

    if (trueValueData.length === 0) {
        document.getElementById('candlestick-chart').innerHTML = "<p>No data available for the selected date range.</p>";
        return;
    }

    const dates = trueValueData.map(row => row.Date);
    const opens = trueValueData.map(row => row.Open);
    const highs = trueValueData.map(row => row.High);
    const lows = trueValueData.map(row => row.Low);
    const closes = trueValueData.map(row => row.Close);
    const volumes = trueValueData.map(row => row.Volume);
    const ma20 = trueValueData.map(row => row.MA20);
    const ma60 = trueValueData.map(row => row.MA60);
    const rsi = trueValueData.map(row => row.RSI);

    const predictDates = predictData.map(row => row.Date);
    const predictCloses = predictData.map(row => row.predicted_price);

    const traceCandlestick = {
        x: dates,
        close: closes,
        decreasing: {line: {color: 'red'}},
        high: highs,
        increasing: {line: {color: 'blue'}},
        low: lows,
        open: opens,
        type: 'candlestick',
        xaxis: 'x',
        yaxis: 'y'
    };

    const traceVolume = {
        x: dates,
        y: volumes,
        type: 'bar',
        yaxis: 'y2',
        marker: {color: 'rgba(100, 150, 250, 0.4)'},
        name: 'Volume'
    };

    const traceMA20 = {
        x: dates,
        y: ma20,
        type: 'scatter',
        mode: 'lines',
        line: {color: 'blue'},
        name: 'MA20'
    };

    const traceMA60 = {
        x: dates,
        y: ma60,
        type: 'scatter',
        mode: 'lines',
        line: {color: 'orange'},
        name: 'MA60'
    };

    const tracePredict = {
        x: predictDates,
        y: predictCloses,
        type: 'scatter',
        mode: 'markers',
        marker: {color: 'green', size: 8},
        name: 'Predicted'
    };

    const traceRSI = {
        x: dates,
        y: rsi,
        type: 'scatter',
        mode: 'lines',
        line: {color: 'purple'},
        name: 'RSI'
    };

    const layoutCandlestick = {
        title: `Bitcoin Price - ${selectedTimeframe.toUpperCase()}`,
        xaxis: {title: 'Date'},
        yaxis: {title: 'Price'},
        showlegend: true,
        responsive: true,
        height: 450, // ìº”ë“¤ ì°¨íŠ¸ì˜ ë†’ì´ ì¡°ì •
    };

    const layoutRSI = {
        title: 'RSI',
        xaxis: {title: 'Date'},
        yaxis: {
            title: 'RSI',
            range: [0, 100],
            tickvals: [0, 30, 50, 70, 100],
            ticktext: ['0', '30', '50', '70', '100'],
        },
        showlegend: true,
        responsive: true,
        height: 200,
        margin: {
            t: 20,
            b: 20
        }
    };

    Plotly.newPlot('candlestick-chart', [traceCandlestick, traceMA20, traceMA60, tracePredict], layoutCandlestick);
    Plotly.newPlot('rsi-chart', [traceRSI], layoutRSI);
}


        async function zoomToThreeMonths() {
            selectedTimeframe = 'day';
            const endDate = new Date();
            const startDate = new Date();
            startDate.setMonth(endDate.getMonth() - 3);

            zoomedStartDate = startDate.toISOString().split('T')[0];
            zoomedEndDate = endDate.toISOString().split('T')[0];

            updateChart(zoomedStartDate, zoomedEndDate);
        }

        async function resetChart() {
            selectedTimeframe = 'week';
            zoomedStartDate = null;
            zoomedEndDate = null;

            updateChart();
        }

        // Initial chart load
        updateChart();
    </script>
</body>
</html>